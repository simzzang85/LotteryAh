global.CONNECT_TO_WEB_SOCKET_SERVER=METHOD({run:function(o,n){"use strict";var e,t,i,E,a,d,c,s,_=void 0===o.isSecure?BROWSER_CONFIG.isSecure:o.isSecure,r=void 0===o.host?BROWSER_CONFIG.host:o.host,u=o.port,C={},v=0;CHECK_IS_DATA(n)!==!0?e=n:(e=n.success,t=n.error),s=function(o,n,e){var t=C[o];void 0!==t&&EACH(t,function(o){o(n,function(o){void 0!==c&&void 0!==e&&c({methodName:"__CALLBACK_"+e,data:o})})})},i=new WebSocket((_===!0?"wss://":"ws://")+r+":"+u),i.onopen=function(){E=!0,e(a=function(o,n){var e=C[o];void 0===e&&(e=C[o]=[]),e.push(n)},d=function(o,n){var e=C[o];void 0!==e&&(void 0!==n?REMOVE({array:e,value:n}):delete C[o])},c=function(o,n){var e;i.send(STRINGIFY({methodName:o.methodName,data:o.data,sendKey:v})),void 0!==n&&(e="__CALLBACK_"+v,a(e,function(o){n(o),d(e)})),v+=1},function(){i.close()})},i.onmessage=function(o){var n=PARSE_STR(o.data);void 0!==n&&s(n.methodName,n.data,n.sendKey)},i.onclose=function(){s("__DISCONNECTED")},i.onerror=function(o){var n=o.toString();E!==!0?void 0!==t?t(n):console.log("[UPPERCASE-CONNECT_TO_WEB_SOCKET_SERVER] CONNECT TO WEB SOCKET SERVER FAILED: "+n):s("__ERROR",n)}}});